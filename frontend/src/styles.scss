/* ---- CSS variables (runtime, theme-able) ---- */
/* Light theme as default */
@use './styles/tokens' as *;

:root {
  /* brand */
  --gbk-brand-h: #{$brand-hue};
  --gbk-brand-s: 85%;
  --gbk-brand-l: 62%;
  --gbk-brand: hsl(var(--gbk-brand-h), var(--gbk-brand-s), var(--gbk-brand-l));
  --gbk-brand-600: hsl(var(--gbk-brand-h), var(--gbk-brand-s), 55%);
  --gbk-brand-700: hsl(var(--gbk-brand-h), var(--gbk-brand-s), 45%);

  /* neutrals */
  --gbk-bg: #ffffff;
  --gbk-bg-alt: #fafafa;
  --gbk-text: #0f0f0f;
  --gbk-text-muted: rgba(0, 0, 0, 0.65);
  --gbk-border: rgba(0, 0, 0, 0.12);
  --gbk-elev: 0 12px 30px rgba(0, 0, 0, 0.08);

  /* states */
  --gbk-success: #17c964;
  --gbk-danger: #ff4d4f;
  --gbk-warning: #f5a524;
  --gbk-focus: 0 0 0 3px color-mix(in oklab, var(--gbk-brand) 30%, transparent);

  /* shapes */
  --gbk-radius-1: #{$radius-1};
  --gbk-radius-2: #{$radius-2};
  --gbk-radius-3: #{$radius-3};

  /* spacing scale (rem for accessibility) */
  --gbk-space-2: #{$space-2};
  --gbk-space-3: #{$space-3};
  --gbk-space-4: #{$space-4};
  --gbk-space-5: #{$space-5};
  --gbk-space-6: #{$space-6};
  --gbk-space-8: #{$space-8};

  /* typography */
  --gbk-font: #{$font-sans};
  --gbk-fs-1: clamp(28px, 4vw, 34px);
  --gbk-fs-2: clamp(18px, 2.2vw, 20px);
  --gbk-fs-3: 14px;
  --gbk-fs-4: 12px;
}

/* Dark theme */
@mixin dark-theme-vars {
  --gbk-bg: #0f0f0f;
  --gbk-bg-alt: #151515;
  --gbk-text: #ffffff;
  --gbk-text-muted: rgba(255, 255, 255, 0.7);
  --gbk-border: rgba(255, 255, 255, 0.14);
  --gbk-elev: 0 18px 36px rgba(0, 0, 0, 0.5);
  --gbk-focus: 0 0 0 3px color-mix(in oklab, var(--gbk-brand) 45%, transparent);
}

/* Apply it to explicit dark theme */
:root[data-theme='dark'] {
  @include dark-theme-vars;
}

/* Apply it when OS prefers dark and the app didn't set a theme */
// @media (prefers-color-scheme: dark) {
//   :root:not([data-theme]) {
//     @include dark-theme-vars;
//   }
// }

/* ---- Base reset-ish ---- */
*,
*::before,
*::after { box-sizing: border-box; }

html, body {
  height: 100%;
  margin: 0;
  font-family: var(--gbk-font);
  background: var(--gbk-bg);
  color: var(--gbk-text);
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
}

/* ---- Mixins (reusable building blocks) ---- */
@mixin card {
  background: var(--gbk-bg);
  border: 1px solid var(--gbk-border);
  border-radius: var(--gbk-radius-2);
  box-shadow: var(--gbk-elev);
}

@mixin input {
  width: 100%;
  background: transparent;
  color: var(--gbk-text);
  border: 1px solid var(--gbk-border);
  border-radius: var(--gbk-radius-2);
  padding: 0.85rem 0.95rem;
  font-size: var(--gbk-fs-3);
  outline: none;
  transition: border-color .15s ease, box-shadow .15s ease;

  &::placeholder { color: var(--gbk-text-muted); }
  &:focus {
    border-color: var(--gbk-brand);
    box-shadow: var(--gbk-focus);
  }
}

@mixin button-primary {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: .5rem;
  width: 100%;
  border: 0;
  border-radius: var(--gbk-radius-2);
  padding: 0.9rem 1rem;
  font-weight: 600;
  font-size: var(--gbk-fs-3);
  color: #fff;
  background: var(--gbk-brand);
  cursor: pointer;
  transition: transform .04s ease, box-shadow .15s ease, background .15s ease;

  &:hover { background: var(--gbk-brand-600); box-shadow: 0 10px 24px color-mix(in oklab, var(--gbk-brand) 30%, transparent); }
  &:active { transform: translateY(1px); }
  &:disabled { opacity: .55; cursor: not-allowed; box-shadow: none; }
}

@mixin label {
  font-size: var(--gbk-fs-4);
  font-weight: 600;
  letter-spacing: .02em;
  color: var(--gbk-text-muted);
}

@mixin headline-1 {
  font-size: var(--gbk-fs-1);
  font-weight: 700;
  letter-spacing: -0.01em;
}

@mixin subtext { font-size: var(--gbk-fs-3); color: var(--gbk-text-muted); }

/* Motion safety */
@media (prefers-reduced-motion: reduce) {
  * { transition: none !important; animation: none !important; }
}
